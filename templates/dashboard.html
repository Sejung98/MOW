{% extends "base.html" %}

{% block content %}
<div class="card">
    <h2>📊 그래프 분석</h2>
    <p>최근 12개월간의 매출, 영업이익, 부가가치세, 소득세 추세를 시각화하여 보여줍니다.</p>

    {% if chart_url %}
    <div style="text-align: center; margin: 2rem 0; position: relative;">
        <!-- 그래프 배경 그라데이션 -->
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0;
                    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
                    border-radius: 20px; backdrop-filter: blur(10px);"></div>

        <!-- 그래프 이미지 -->
        <img src="{{ chart_url }}" alt="판매 추세 그래프"
             style="max-width: 100%; height: auto; border-radius: 20px;
                    box-shadow: 0 20px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(255,255,255,0.1);
                    position: relative; z-index: 1;">

        <!-- 빛나는 테두리 효과 -->
        <div style="position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px;
                    background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #f5576c);
                    border-radius: 22px; z-index: 0; opacity: 0.3; animation: glow 3s ease-in-out infinite alternate;"></div>
    </div>

    <style>
        @keyframes glow {
            from { opacity: 0.3; transform: scale(1); }
            to { opacity: 0.6; transform: scale(1.01); }
        }
    </style>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 2rem;">
        <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 1.5rem; border-radius: 12px; text-align: center;">
            <h4>📈 매출 추세</h4>
            <p>파란색 선으로 표시된 월별 매출 변동 추이</p>
        </div>
        <div style="background: linear-gradient(135deg, #764ba2, #f093fb); color: white; padding: 1.5rem; border-radius: 12px; text-align: center;">
            <h4>💼 영업이익</h4>
            <p>보라색 선으로 표시된 월별 이익 추이</p>
        </div>
        <div style="background: linear-gradient(135deg, #f093fb, #f5576c); color: white; padding: 1.5rem; border-radius: 12px; text-align: center;">
            <h4>🧾 부가가치세</h4>
            <p>분홍색 선으로 표시된 세금 추이</p>
        </div>
        <div style="background: linear-gradient(135deg, #f5576c, #ff6b6b); color: white; padding: 1.5rem; border-radius: 12px; text-align: center;">
            <h4>💸 소득세</h4>
            <p>빨간색 선으로 표시된 소득세 추이</p>
        </div>
    </div>
    {% else %}
    <div style="text-align: center; padding: 4rem 2rem; background: rgba(102, 126, 234, 0.1); border-radius: 12px; margin: 2rem 0;">
        <h3 style="color: #667eea; margin-bottom: 1rem;">📊 데이터가 없습니다</h3>
        <p style="color: #666; margin-bottom: 2rem;">그래프를 표시하기 위해서는 판매 데이터가 필요합니다.</p>
        <a href="{{ url_for('generate_dummy_data') }}" class="btn">📊 더미 데이터 생성하기</a>
    </div>
    {% endif %}

    <div style="margin-top: 2rem; padding: 1.5rem; background: rgba(255,255,255,0.8); border-radius: 12px; border-left: 4px solid #667eea;">
        <h4 style="margin-top: 0; color: #2c3e50;">💡 사용 팁</h4>
        <ul style="color: #555; line-height: 1.6;">
            <li>더미 데이터를 생성하면 최근 30일간의 판매 기록이 자동으로 추가됩니다.</li>
            <li>그래프는 월별로 집계되어 최근 12개월의 추세를 보여줍니다.</li>
            <li>실제 데이터를 입력하면 실시간으로 그래프가 업데이트됩니다.</li>
            <li>각 선의 색상은 범례에서 확인할 수 있습니다.</li>
        </ul>
    </div>
</div>
{% endblock %}
